import{g as A,u as q,r,C as O,j as e,c as x,h as w,q as D,w as F,a as $,i as P,k as T}from"./index-02813c04.js";import{a as p,t as v,b as N}from"./six-31d4c791.js";const M="/assets/check-0bfefc0e.svg",H=()=>{const d=A(),y=q();let{user:Q,setuser:B,id:u,setid:U}=r.useContext(O);const[l,i]=r.useState([]),[j,_]=r.useState(!1),[b,f]=r.useState(""),h=[{id:1,head:"Round Indoor table",body:"A round table set indoors",img:p,tag:"RNDI_"},{id:2,head:"Square Indoor table",body:"A square table set indoors",img:v,tag:"SQRI_"},{id:3,head:"Rectangle Indoor table",body:"A rectangular table set indoors",img:N,tag:"RECI_"},{id:4,head:"Round Outdoor table",body:"A round table set outside",img:p,tag:"RNDO_"},{id:5,head:"Square Outdoor table",body:"A square table set outside",img:v,tag:"SQRO_"},{id:6,head:"Rectangle Outdoor table",body:"A rectangular table set outside",img:N,tag:"RECO_"}],g=s=>{if(l.some(a=>s===a.the_id))i(l.filter(a=>a.the_class!==s));else{const a={the_class:s,the_head:`${h[s-1].head}`,the_amount:"",tag:`${h[s-1].tag}`,availability:"true"};i([...l,a])}};function C(){_(!0)}function R(){_(!1)}const S=(s,c)=>{i(a=>a.map(o=>o.the_class===s?{...o,the_amount:c}:o))},E=async()=>{const s=l.some(a=>a.the_amount===""),c=l.some(a=>a.the_money==="");if(s&&c)console.log(!0);else try{const a=x(d,"tables");l.forEach(async t=>{console.log(t);for(let n=0;n<t.the_amount;n++)await w(a,{restaurant_id:u,tableId:t.tag+String(n),tableClass:t.the_class,tableType:t.the_head,tableNumber:t.the_amount,tableAvailability:t.availability})});const o=x(d,"restaurant"),m=D(o,F("userId","==",u));$(m).then(t=>{t.forEach(n=>{const I=P(d,"restaurant",n.id);T(I,{price_per_table:`${b}`}).then(()=>{console.log("Document successfully updated!")}).catch(k=>{console.error("Error updating document: ",k)})})}).catch(t=>{console.error("Error querying Firestore:",t)}),y("/dash")}catch(a){const o=a.code,m=a.message;console.error(o,m)}};return e.jsxs("div",{className:"Setup",children:[e.jsxs("div",{className:"set_table",children:[e.jsxs("div",{className:"set_head",children:[e.jsx("h2",{className:"set_name",children:"Select your table type"}),e.jsx("div",{className:"lil_exp",children:"Tailor your reservation options to match your restaurants seating layout and enhance the booking experience"})]}),e.jsx("div",{className:"table_cards",children:h.map(s=>e.jsxs("div",{onClick:()=>g(s.id),className:`tables_tab ${l.some(c=>c.the_class===s.id)?"selected_tab":""}`,children:[e.jsx("img",{src:s.img,alt:"table_icon",className:"table_icons"}),e.jsxs("div",{className:"table_card_dets",children:[e.jsx("span",{className:"card_head",children:s.head}),e.jsx("span",{className:"card_exp",children:s.body})]}),e.jsx("span",{className:"good",children:e.jsx("img",{src:M,alt:"good"})})]},s.id))}),e.jsx("div",{className:"move_on",children:e.jsxs("span",{className:"next_button",onClick:C,children:[" ","next"]})})]}),e.jsx("div",{className:`overlay_tab ${j?"modal":""}`,children:e.jsxs("div",{className:"set_table_no",children:[e.jsxs("span",{className:"code_arrow",onClick:R,children:["← ",e.jsx("span",{children:"Back"})]}),e.jsx("div",{className:"select_head",children:"Selection Summary"}),e.jsx("div",{className:"select_note",children:"Please fill in the following fields with the required information your restaurant."}),e.jsxs("div",{className:"selection",children:[e.jsxs("label",{className:"real_Deal",children:["Price per seat:",e.jsx("input",{type:"text",placeholder:"$",className:"logged",value:b,onChange:s=>f(s.target.value)})]}),e.jsx("div",{className:"tables_Selected",children:"tables"}),e.jsx("div",{className:"selected",children:l.map((s,c)=>e.jsxs("div",{className:"summary_tab",children:[e.jsxs("div",{className:"sum_header",children:[e.jsx("span",{className:"summary_head",children:"Table card"}),e.jsx("span",{className:"close_code",onClick:()=>g(s.the_class),children:"☓"})]}),e.jsxs("label",{children:["Table type:",e.jsx("span",{className:"summary_name",children:s.the_head})]}),e.jsxs("label",{children:["Table number:",e.jsx("input",{type:"text",placeholder:"no. of tables",value:s.the_amount,className:"logged",onChange:a=>S(s.the_class,a.target.value)})]})]},c))}),e.jsx("div",{className:"finish_button",onClick:E,children:"Finish"})]})]})})]})};export{H as default};
